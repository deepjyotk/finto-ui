{
  "openapi": "3.1.0",
  "info": {
    "title": "ArthiQ API",
    "description": "JWT-based authentication API with chat functionality",
    "version": "0.1.0"
  },
  "paths": {
    "/healthz": {
      "get": {
        "tags": [
          "health"
        ],
        "summary": "Health Check",
        "description": "Health check endpoint for container orchestration",
        "operationId": "health_check_healthz_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/register": {
      "post": {
        "tags": [
          "authentication"
        ],
        "summary": "Register a new user",
        "description": "Create a new user account and return the created user information.",
        "operationId": "register_api_v1_auth_register_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "User successfully created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          },
          "400": {
            "description": "Username or email already exists"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/login": {
      "post": {
        "tags": [
          "authentication"
        ],
        "summary": "Login user",
        "description": "Authenticate user, set JWT access token cookie, and return user information.",
        "operationId": "login_api_v1_auth_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserLogin"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully authenticated; JWT token set in cookie",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid username or password"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/logout": {
      "post": {
        "tags": [
          "authentication"
        ],
        "summary": "Logout user",
        "description": "Clear authentication cookie and end user session.",
        "operationId": "logout_api_v1_auth_logout_post",
        "responses": {
          "200": {
            "description": "Successfully logged out",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/me": {
      "get": {
        "tags": [
          "authentication"
        ],
        "summary": "Get current user",
        "description": "Retrieve information about the currently authenticated user.",
        "operationId": "get_current_user_api_v1_auth_me_get",
        "responses": {
          "200": {
            "description": "User information retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          },
          "401": {
            "description": "Not authenticated or invalid token"
          }
        }
      }
    },
    "/api/v1/auth/verify": {
      "get": {
        "tags": [
          "authentication"
        ],
        "summary": "Verify authentication status",
        "description": "Check if the current JWT token is valid and return authentication status.",
        "operationId": "verify_token_api_v1_auth_verify_get",
        "responses": {
          "200": {
            "description": "Authentication status returned",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        }
      }
    },
    "/api/v1/chat": {
      "post": {
        "tags": [
          "chat"
        ],
        "summary": "Send a chat message",
        "description": "Send a message to the chat system and receive a     response. Supports conversation history and optional file attachments.",
        "operationId": "chat_api_v1_chat_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChatResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "deprecated": true
      }
    },
    "/api/v1/holdings/metadata": {
      "get": {
        "tags": [
          "holdings"
        ],
        "summary": "Get Holdings Metadata",
        "operationId": "get_holdings_metadata_api_v1_holdings_metadata_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HoldingsMetadataSchema"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/holdings/file-upload": {
      "post": {
        "tags": [
          "holdings"
        ],
        "summary": "Bulk upload equity holdings from file",
        "description": "Upload Excel (.xlsx, .xls) or CSV file to create multiple equity holdings.",
        "operationId": "upload_holdings_file_api_v1_holdings_file_upload_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_upload_holdings_file_api_v1_holdings_file_upload_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Holdings successfully uploaded and created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkHoldingsUploadResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid file format or parsing error"
          },
          "401": {
            "description": "Not authenticated or invalid token"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/kite/login": {
      "get": {
        "tags": [
          "kite"
        ],
        "summary": "Kite Login",
        "description": "Redirect authenticated user to Kite login page.\n\nThe user must be logged into this application (JWT cookie). After a\nsuccessful login on Zerodha, Zerodha will redirect to the callback URL\nconfigured in your Kite app settings with a request_token parameter.\n\nTODO: Add state parameter handling to prevent CSRF and map request -\u003E user.",
        "operationId": "kite_login_api_v1_kite_login_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        }
      }
    },
    "/api/v1/kite/callback": {
      "get": {
        "tags": [
          "kite"
        ],
        "summary": "Kite Callback",
        "operationId": "kite_callback_api_v1_kite_callback_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        }
      }
    },
    "/api/v1/kite/token": {
      "get": {
        "tags": [
          "kite"
        ],
        "summary": "Kite Token Info",
        "description": "Return whether the current authenticated user has a Kite access token.\nUses jsonable_encoder to ensure datetime (if any) is serialized.",
        "operationId": "kite_token_info_api_v1_kite_token_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        }
      }
    },
    "/api/v1/kite/status": {
      "get": {
        "tags": [
          "kite"
        ],
        "summary": "Kite Status",
        "description": "Public status endpoint for debugging.\n\nReturns whether the current user is connected and some non-sensitive metadata.",
        "operationId": "kite_status_api_v1_kite_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        }
      }
    },
    "/api/v1/kite/holdings": {
      "get": {
        "tags": [
          "kite"
        ],
        "summary": "Kite Holdings",
        "description": "Fetch user's holdings via Kite Connect.\nRequires user to have completed the auth flow (access token stored).\nTODO: Cache results (short TTL) to reduce API calls.",
        "operationId": "kite_holdings_api_v1_kite_holdings_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        }
      }
    },
    "/api/v1/kite/positions": {
      "get": {
        "tags": [
          "kite"
        ],
        "summary": "Kite Positions",
        "description": "Fetch user's positions (net and day) via Kite Connect.\nReturns both overnight positions (net) and day positions.",
        "operationId": "kite_positions_api_v1_kite_positions_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        }
      }
    },
    "/api/v1/kite/orders": {
      "get": {
        "tags": [
          "kite"
        ],
        "summary": "Kite Orders",
        "description": "Fetch user's orders (order book) for today via Kite Connect.\nIncludes open, pending, and executed orders.",
        "operationId": "kite_orders_api_v1_kite_orders_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        }
      }
    },
    "/api/v1/kite/trades": {
      "get": {
        "tags": [
          "kite"
        ],
        "summary": "Kite Trades",
        "description": "Fetch user's trades for today via Kite Connect.",
        "operationId": "kite_trades_api_v1_kite_trades_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        }
      }
    },
    "/api/v1/kite/quote": {
      "get": {
        "tags": [
          "kite"
        ],
        "summary": "Kite Quote",
        "description": "Fetch quote data (OHLC, depth, etc.) for one or more symbols.\n\nArgs:\n    symbols: Comma-separated symbols (e.g., \"NSE:INFY,NSE:TCS\")",
        "operationId": "kite_quote_api_v1_kite_quote_get",
        "parameters": [
          {
            "name": "symbols",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Symbols"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/kite/ltp": {
      "get": {
        "tags": [
          "kite"
        ],
        "summary": "Kite Ltp",
        "description": "Fetch last traded price (LTP) for one or more symbols.\nLightweight endpoint compared to quote.\n\nArgs:\n    symbols: Comma-separated symbols (e.g., \"NSE:INFY,NSE:TCS\")",
        "operationId": "kite_ltp_api_v1_kite_ltp_get",
        "parameters": [
          {
            "name": "symbols",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Symbols"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/kite/historical": {
      "get": {
        "tags": [
          "kite"
        ],
        "summary": "Kite Historical",
        "description": "Fetch historical candle data for an instrument.\n\nArgs:\n    instrument_token: Token of the instrument\n    interval: Candle interval (minute, 3minute, 5minute, 15minute, 30minute, 60minute, day, week, month)\n    from_date: Start date (format: YYYY-MM-DD or YYYY-MM-DD HH:MM:SS)\n    to_date: End date (format: YYYY-MM-DD or YYYY-MM-DD HH:MM:SS)\n\nReturns:\n    Candles data with [timestamp, open, high, low, close, volume] format",
        "operationId": "kite_historical_api_v1_kite_historical_get",
        "parameters": [
          {
            "name": "instrument_token",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Instrument Token"
            }
          },
          {
            "name": "interval",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Interval"
            }
          },
          {
            "name": "from_date",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "From Date"
            }
          },
          {
            "name": "to_date",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "To Date"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/thesys/session": {
      "post": {
        "tags": [
          "thesys-chat"
        ],
        "summary": "Create a new chat session",
        "description": "Creates a new chat session for the authenticated user and returns the session ID.",
        "operationId": "create_session_api_v1_thesys_session_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionResponse"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "thesys-chat"
        ],
        "summary": "Get chat sessions for the authenticated user (paginated)",
        "description": "Returns past chat sessions for the authenticated user, sorted by most recent first. Supports optional pagination via page and page_limit query parameters. If not provided, defaults to page=1 and page_limit=10. Maximum page_limit is 100.",
        "operationId": "get_sessions_api_v1_thesys_session_get",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Page number (1-indexed). Optional, defaults to 1.",
              "default": 1,
              "title": "Page"
            },
            "description": "Page number (1-indexed). Optional, defaults to 1."
          },
          {
            "name": "page_limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Number of sessions per page. Optional, defaults to 10. Maximum is 100.",
              "default": 10,
              "title": "Page Limit"
            },
            "description": "Number of sessions per page. Optional, defaults to 10. Maximum is 100."
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionsListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/thesys/session/{session_id}": {
      "get": {
        "tags": [
          "thesys-chat"
        ],
        "summary": "Get messages for a specific session",
        "description": "Returns all messages for a given session ID, ordered by sequence number.",
        "operationId": "get_session_api_v1_thesys_session__session_id__get",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionMessageConfig"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "thesys-chat"
        ],
        "summary": "Delete a chat session",
        "description": "Deletes a chat session and all its associated messages. Only the owner of the session can delete it.",
        "operationId": "delete_session_api_v1_thesys_session__session_id__delete",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/thesys/chat_metadata": {
      "get": {
        "tags": [
          "thesys-chat"
        ],
        "summary": "Get chat metadata for the authenticated user",
        "description": "Returns all available brokers that the user has holdings with.",
        "operationId": "get_chat_metadata_api_v1_thesys_chat_metadata_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChatMetadataResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/thesys/chat": {
      "post": {
        "tags": [
          "thesys-chat"
        ],
        "summary": "Streaming Thesys C1 chat endpoint",
        "description": "Streaming endpoint consumed by the Thesys C1Chat React component. It receives prompt, sessionId, and responseId and forwards the conversation to the C1 model, streaming tokens back as SSE.",
        "operationId": "thesys_chat_api_v1_thesys_chat_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/C1ChatRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/webhooks/whatsapp": {
      "get": {
        "tags": [
          "whatsapp"
        ],
        "summary": "Verify",
        "operationId": "verify_api_v1_webhooks_whatsapp_get",
        "parameters": [
          {
            "name": "hub.mode",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hub.Mode"
            }
          },
          {
            "name": "hub.challenge",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hub.Challenge"
            }
          },
          {
            "name": "hub.verify_token",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Hub.Verify Token"
            }
          },
          {
            "name": "mode",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Mode"
            }
          },
          {
            "name": "challenge",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Challenge"
            }
          },
          {
            "name": "verify_token",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Verify Token"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "whatsapp"
        ],
        "summary": "Receive",
        "operationId": "receive_api_v1_webhooks_whatsapp_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        }
      }
    },
    "/api/v1/whatsapp/send-text": {
      "post": {
        "tags": [
          "whatsapp"
        ],
        "summary": "Send Text",
        "operationId": "send_text_api_v1_whatsapp_send_text_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SendTextRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SendTextResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/whatsapp/send-template": {
      "post": {
        "tags": [
          "whatsapp"
        ],
        "summary": "Send Template",
        "operationId": "send_template_api_v1_whatsapp_send_template_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SendTemplateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SendTemplateResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/whatsapp/connect-intent": {
      "post": {
        "tags": [
          "whatsapp"
        ],
        "summary": "Create Connect Intent",
        "operationId": "create_connect_intent_api_v1_whatsapp_connect_intent_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConnectIntentRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConnectIntentResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/whatsapp/{integration_id}": {
      "delete": {
        "tags": [
          "whatsapp"
        ],
        "summary": "Delete Integration",
        "description": "Delete a WhatsApp integration.\n\nThis endpoint deletes the WhatsApp metadata entry for the specified integration ID.\nOnly the owner of the integration can delete it.\n\n**Authentication required**: Yes (JWT token in cookie)\n\nReturns:\n    Success message upon successful deletion",
        "operationId": "delete_integration_api_v1_whatsapp__integration_id__delete",
        "parameters": [
          {
            "name": "integration_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Integration Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Body_upload_holdings_file_api_v1_holdings_file_upload_post": {
        "properties": {
          "broker_id": {
            "type": "string",
            "format": "uuid",
            "title": "Broker Id",
            "description": "Broker ID"
          },
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File",
            "description": "Excel or CSV file with holdings data"
          }
        },
        "type": "object",
        "required": [
          "broker_id",
          "file"
        ],
        "title": "Body_upload_holdings_file_api_v1_holdings_file_upload_post"
      },
      "BrokerPayload": {
        "properties": {
          "broker_id": {
            "type": "string",
            "title": "Broker Id"
          },
          "broker_name": {
            "type": "string",
            "title": "Broker Name"
          },
          "broker_type": {
            "type": "string",
            "title": "Broker Type"
          },
          "country": {
            "type": "string",
            "title": "Country"
          }
        },
        "type": "object",
        "required": [
          "broker_id",
          "broker_name",
          "broker_type",
          "country"
        ],
        "title": "BrokerPayload",
        "description": "Broker information payload"
      },
      "BulkHoldingsUploadResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the upload was successful"
          },
          "records_processed": {
            "type": "integer",
            "title": "Records Processed",
            "description": "Number of records processed"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Response message"
          }
        },
        "type": "object",
        "required": [
          "success",
          "records_processed",
          "message"
        ],
        "title": "BulkHoldingsUploadResponse",
        "description": "Schema for bulk holdings upload response"
      },
      "C1ChatRequest": {
        "properties": {
          "message_payload": {
            "$ref": "#/components/schemas/C1Message"
          },
          "session_id": {
            "type": "string",
            "title": "Session Id"
          },
          "broker_id": {
            "type": "string",
            "title": "Broker Id"
          }
        },
        "type": "object",
        "required": [
          "message_payload",
          "session_id",
          "broker_id"
        ],
        "title": "C1ChatRequest"
      },
      "C1Message": {
        "properties": {
          "content": {
            "type": "string",
            "title": "Content"
          }
        },
        "type": "object",
        "required": [
          "content"
        ],
        "title": "C1Message"
      },
      "ChatIntegration": {
        "properties": {
          "whatsapp": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/WhatsAppPayload"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "title": "ChatIntegration",
        "description": "Chat integration wrapper"
      },
      "ChatMessageType": {
        "type": "string",
        "enum": [
          "User",
          "AI"
        ],
        "title": "ChatMessageType",
        "description": "Enum for chat message types."
      },
      "ChatMetadataResponse": {
        "properties": {
          "brokers": {
            "items": {
              "$ref": "#/components/schemas/UserBrokerItem"
            },
            "type": "array",
            "title": "Brokers"
          }
        },
        "type": "object",
        "required": [
          "brokers"
        ],
        "title": "ChatMetadataResponse"
      },
      "ChatRequest": {
        "properties": {
          "message": {
            "type": "string",
            "title": "Message",
            "description": "User message to send",
            "examples": [
              "Hello, how are you?"
            ]
          },
          "file": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "File",
            "description": "Optional file path or identifier",
            "examples": [null]
          },
          "conversation_history": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Conversation History",
            "description": "Previous messages in the conversation",
            "examples": [
              [
                "Hello",
                "Hi there!"
              ]
            ]
          },
          "model": {
            "$ref": "#/components/schemas/LLMModel",
            "description": "AI model to use for the chat",
            "default": {
              "model": "gpt-4.1",
              "kwargs": {
                "temperature": 0.5
              }
            },
            "examples": [
              {
                "kwargs": {
                  "temperature": 0.5
                },
                "model": "gpt-4.1"
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "message"
        ],
        "title": "ChatRequest",
        "example": {
          "conversation_history": [
            "Hello",
            "Hi! How can I help you?"
          ],
          "message": "What is the weather today?",
          "model_name": "gpt-4o-mini"
        }
      },
      "ChatResponse": {
        "properties": {
          "response": {
            "type": "string",
            "title": "Response",
            "description": "AI response message",
            "examples": [
              "Hello! How can I help you?"
            ]
          }
        },
        "type": "object",
        "required": [
          "response"
        ],
        "title": "ChatResponse",
        "example": {
          "response": "Hello! How can I help you today?"
        }
      },
      "ConnectIntentRequest": {
        "properties": {
          "ttl_minutes": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ttl Minutes",
            "default": 10
          }
        },
        "type": "object",
        "title": "ConnectIntentRequest"
      },
      "ConnectIntentResponse": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code"
          },
          "deeplink": {
            "type": "string",
            "title": "Deeplink"
          },
          "expires_at": {
            "type": "string",
            "format": "date-time",
            "title": "Expires At"
          }
        },
        "type": "object",
        "required": [
          "code",
          "deeplink",
          "expires_at"
        ],
        "title": "ConnectIntentResponse"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "HoldingsMetadataSchema": {
        "properties": {
          "chat_integrations": {
            "items": {
              "$ref": "#/components/schemas/ChatIntegration"
            },
            "type": "array",
            "title": "Chat Integrations"
          },
          "available_brokers": {
            "items": {
              "$ref": "#/components/schemas/BrokerPayload"
            },
            "type": "array",
            "title": "Available Brokers"
          },
          "portfolio_updates": {
            "items": {
              "$ref": "#/components/schemas/PortfolioUpdates"
            },
            "type": "array",
            "title": "Portfolio Updates"
          }
        },
        "type": "object",
        "required": [
          "chat_integrations",
          "available_brokers",
          "portfolio_updates"
        ],
        "title": "HoldingsMetadataSchema",
        "description": "Holdings metadata response schema"
      },
      "LLMModel": {
        "enum": [
          {
            "kwargs": {
              "temperature": 0
            },
            "model": "gpt-3.5-turbo"
          },
          {
            "kwargs": {
              "temperature": 0
            },
            "model": "gpt-3.5-turbo-16k"
          },
          {
            "kwargs": {
              "temperature": 0
            },
            "model": "gpt-4"
          },
          {
            "kwargs": {
              "temperature": 0
            },
            "model": "gpt-4-turbo"
          },
          {
            "kwargs": {
              "temperature": 0
            },
            "model": "gpt-4-turbo-preview"
          },
          {
            "kwargs": {
              "temperature": 0
            },
            "model": "gpt-4-32k"
          },
          {
            "kwargs": {
              "temperature": 0.5
            },
            "model": "gpt-4o"
          },
          {
            "kwargs": {
              "temperature": 0
            },
            "model": "gpt-4o-mini"
          },
          {
            "kwargs": {
              "temperature": 0
            },
            "model": "gpt-4o-2024-08-06"
          },
          {
            "kwargs": {
              "temperature": 0.5
            },
            "model": "gpt-4.1"
          },
          {
            "kwargs": {
              "temperature": 0
            },
            "model": "gpt-4.1-mini"
          },
          {
            "kwargs": {
              "temperature": 0
            },
            "model": "gpt-4.1-nano"
          },
          {
            "kwargs": {

            },
            "model": "gpt-5"
          },
          {
            "kwargs": {
              "temperature": 0
            },
            "model": "gpt-5-chat"
          },
          {
            "kwargs": {
              "temperature": 1
            },
            "model": "gpt-5.1"
          },
          {
            "kwargs": {
              "temperature": 0
            },
            "model": "gpt-5.1-instant"
          },
          {
            "kwargs": {

            },
            "model": "o1"
          },
          {
            "kwargs": {

            },
            "model": "o1-preview"
          },
          {
            "kwargs": {

            },
            "model": "o1-mini"
          },
          {
            "kwargs": {

            },
            "model": "o3"
          },
          {
            "kwargs": {

            },
            "model": "o3-pro"
          },
          {
            "kwargs": {

            },
            "model": "o4-mini"
          },
          {
            "kwargs": {

            },
            "model": "o4-mini-high"
          }
        ],
        "title": "LLMModel",
        "description": "Supported AI models with associated LLM kwargs.\n\nEach enum member stores both the model name and its configuration kwargs.\nAccess the model name with `.value['model']` or `.model_name`\nAccess the kwargs with `.value['kwargs']` or `.llm_kwargs`"
      },
      "MessageItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "seq_no": {
            "type": "integer",
            "title": "Seq No"
          },
          "message_payload": {
            "type": "string",
            "title": "Message Payload"
          },
          "message_type": {
            "$ref": "#/components/schemas/ChatMessageType"
          }
        },
        "type": "object",
        "required": [
          "id",
          "seq_no",
          "message_payload",
          "message_type"
        ],
        "title": "MessageItem"
      },
      "PortfolioUpdates": {
        "properties": {
          "broker_id": {
            "type": "string",
            "title": "Broker Id"
          },
          "broker_name": {
            "type": "string",
            "title": "Broker Name"
          },
          "last_updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Last Updated At"
          },
          "uploaded_via": {
            "type": "string",
            "title": "Uploaded Via"
          },
          "additional_metadata": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Additional Metadata"
          }
        },
        "type": "object",
        "required": [
          "broker_id",
          "broker_name",
          "last_updated_at",
          "uploaded_via",
          "additional_metadata"
        ],
        "title": "PortfolioUpdates",
        "description": "Portfolio updates"
      },
      "SendTemplateRequest": {
        "properties": {
          "to": {
            "type": "string",
            "title": "To",
            "description": "E.164 phone number"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Template name"
          },
          "language": {
            "type": "string",
            "title": "Language",
            "description": "Language code",
            "default": "en_US"
          },
          "components": {
            "items": {
              "$ref": "#/components/schemas/TemplateComponent"
            },
            "type": "array",
            "title": "Components"
          }
        },
        "type": "object",
        "required": [
          "to",
          "name"
        ],
        "title": "SendTemplateRequest"
      },
      "SendTemplateResponse": {
        "properties": {
          "messaging_product": {
            "type": "string",
            "title": "Messaging Product"
          },
          "contacts": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Contacts"
          },
          "messages": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Messages"
          }
        },
        "type": "object",
        "required": [
          "messaging_product",
          "contacts",
          "messages"
        ],
        "title": "SendTemplateResponse"
      },
      "SendTextRequest": {
        "properties": {
          "to": {
            "type": "string",
            "title": "To",
            "description": "E.164 phone number"
          },
          "text": {
            "type": "string",
            "title": "Text"
          }
        },
        "type": "object",
        "required": [
          "to",
          "text"
        ],
        "title": "SendTextRequest"
      },
      "SendTextResponse": {
        "properties": {
          "messaging_product": {
            "type": "string",
            "title": "Messaging Product"
          },
          "contacts": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Contacts"
          },
          "messages": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Messages"
          }
        },
        "type": "object",
        "required": [
          "messaging_product",
          "contacts",
          "messages"
        ],
        "title": "SendTextResponse"
      },
      "SessionItem": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id"
          },
          "started_at": {
            "type": "string",
            "title": "Started At"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "started_at"
        ],
        "title": "SessionItem"
      },
      "SessionMessageConfig": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id"
          },
          "messages": {
            "items": {
              "$ref": "#/components/schemas/MessageItem"
            },
            "type": "array",
            "title": "Messages"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "messages"
        ],
        "title": "SessionMessageConfig"
      },
      "SessionResponse": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id"
          },
          "started_at": {
            "type": "string",
            "title": "Started At"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "started_at"
        ],
        "title": "SessionResponse"
      },
      "SessionsListResponse": {
        "properties": {
          "sessions": {
            "items": {
              "$ref": "#/components/schemas/SessionItem"
            },
            "type": "array",
            "title": "Sessions"
          },
          "page": {
            "type": "integer",
            "title": "Page"
          },
          "page_limit": {
            "type": "integer",
            "title": "Page Limit"
          },
          "total_sessions": {
            "type": "integer",
            "title": "Total Sessions"
          },
          "total_pages": {
            "type": "integer",
            "title": "Total Pages"
          },
          "has_next_page": {
            "type": "boolean",
            "title": "Has Next Page"
          }
        },
        "type": "object",
        "required": [
          "sessions",
          "page",
          "page_limit",
          "total_sessions",
          "total_pages",
          "has_next_page"
        ],
        "title": "SessionsListResponse"
      },
      "TemplateComponent": {
        "properties": {
          "type": {
            "type": "string",
            "title": "Type"
          },
          "parameters": {
            "items": {
              "$ref": "#/components/schemas/TemplateParameter"
            },
            "type": "array",
            "title": "Parameters"
          }
        },
        "type": "object",
        "required": [
          "type",
          "parameters"
        ],
        "title": "TemplateComponent"
      },
      "TemplateParameter": {
        "properties": {
          "type": {
            "type": "string",
            "title": "Type"
          },
          "text": {
            "type": "string",
            "title": "Text"
          }
        },
        "type": "object",
        "required": [
          "type",
          "text"
        ],
        "title": "TemplateParameter"
      },
      "UserBrokerItem": {
        "properties": {
          "broker_id": {
            "type": "string",
            "format": "uuid",
            "title": "Broker Id"
          },
          "broker_name": {
            "type": "string",
            "title": "Broker Name"
          }
        },
        "type": "object",
        "required": [
          "broker_id",
          "broker_name"
        ],
        "title": "UserBrokerItem"
      },
      "UserCreate": {
        "properties": {
          "username": {
            "type": "string",
            "title": "Username",
            "description": "Unique username",
            "example": "johndoe"
          },
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "User email address",
            "example": "john@example.com"
          },
          "full_name": {
            "type": "string",
            "title": "Full Name",
            "description": "User's full name",
            "example": "John Doe"
          },
          "password": {
            "type": "string",
            "minLength": 8,
            "title": "Password",
            "description": "User password (min 8 characters)",
            "example": "SecurePass123!"
          }
        },
        "type": "object",
        "required": [
          "username",
          "email",
          "full_name",
          "password"
        ],
        "title": "UserCreate",
        "example": {
          "email": "john@example.com",
          "full_name": "John Doe",
          "password": "SecurePass123!",
          "username": "johndoe"
        }
      },
      "UserLogin": {
        "properties": {
          "username": {
            "type": "string",
            "title": "Username",
            "description": "Username for login",
            "example": "johndoe"
          },
          "password": {
            "type": "string",
            "title": "Password",
            "description": "User password",
            "example": "SecurePass123!"
          }
        },
        "type": "object",
        "required": [
          "username",
          "password"
        ],
        "title": "UserLogin",
        "example": {
          "password": "SecurePass123!",
          "username": "johndoe"
        }
      },
      "UserResponse": {
        "properties": {
          "username": {
            "type": "string",
            "title": "Username",
            "description": "Unique username",
            "example": "johndoe"
          },
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "User email address",
            "example": "john@example.com"
          },
          "full_name": {
            "type": "string",
            "title": "Full Name",
            "description": "User's full name",
            "example": "John Doe"
          },
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id",
            "description": "Unique user identifier"
          }
        },
        "type": "object",
        "required": [
          "username",
          "email",
          "full_name",
          "user_id"
        ],
        "title": "UserResponse",
        "example": {
          "email": "john@example.com",
          "full_name": "John Doe",
          "user_id": "123e4567-e89b-12d3-a456-426614174000",
          "username": "johndoe"
        }
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "WhatsAppPayload": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "user_e164": {
            "type": "string",
            "title": "User E164"
          }
        },
        "type": "object",
        "required": [
          "id",
          "user_e164"
        ],
        "title": "WhatsAppPayload",
        "description": "WhatsApp integration payload"
      }
    }
  },
  "tags": [
    {
      "name": "authentication",
      "description": "User authentication operations including register, login, and token management"
    },
    {
      "name": "chat",
      "description": "Chat and conversation endpoints"
    },
    {
      "name": "holdings",
      "description": "Equity holdings management endpoints"
    }
  ]
}